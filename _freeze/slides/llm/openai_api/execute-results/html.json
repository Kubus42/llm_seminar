{
  "hash": "08af41aa0de0d826680619d971b2721a",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"The OpenAI API\"\nformat: \n    revealjs:\n        theme: default\n        chalkboard: true\n        footer: \"Seminar: LLM, SoSe 2025\"\n        logo: ../../assets/logo.svg\n        fig-align: center\n---\n\n\n## Let's get started \n\nThe great thing about APIs is that we can start right away without too much preparation! \n\nIn this sprint, we will use the OpenAI API for completions and embeddings.\n\nResource: [OpenAI API docs](https://platform.openai.com/docs/introduction){.external}\n\n## Authentication\n\nTypically, it's as simple as this:\n\n::: {#1248c1d1 .cell execution_count=1}\n``` {.python .cell-code}\n# setting up the client in Python\nimport os\nfrom openai import OpenAI\n\nclient = OpenAI(\n    api_key=os.environ.get(\"OPENAI_API_KEY\")\n)\n```\n:::\n\n\n## Authentication for the seminar\nFor the sprint, we have a model in Azure. \n\n::: {#e579be29 .cell execution_count=2}\n``` {.python .cell-code}\nimport os\nfrom llm_utils.client import get_openai_client\n\nMODEL = \"gpt-4o\"\n\nclient = get_openai_client(\n    model=MODEL,\n    config_path=os.environ.get(\"CONFIG_PATH\")\n)\n```\n:::\n\n\n## Creating a completion\n\n::: {#20c6855f .cell execution_count=3}\n``` {.python .cell-code}\nchat_completion = client.chat.completions.create(\n    messages=[\n        {\n            \"role\": \"user\",\n            \"content\": \"How old is the earth?\",\n        }\n    ],\n    model=\"gpt-4o\" \n)\n\n# check out the type of the response\n\nprint(f\"Response: {type(chat_completion)}\") # a ChatCompletion object\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nResponse: <class 'openai.types.chat.chat_completion.ChatCompletion'>\n```\n:::\n:::\n\n\n## Retrieving the response \n\n::: {#25e30229 .cell execution_count=4}\n``` {.python .cell-code}\n# print the message we want\nprint(f\"\\nResponse message: {chat_completion.choices[0].message.content}\")\n\n# check the tokens used \nprint(f\"\\nTotal tokens used: {chat_completion.usage.total_tokens}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nResponse message: The Earth is approximately 4.54 billion years old. This estimate is based on radiometric age dating of the oldest rocks and meteorites found on Earth and in the solar system.\n\nTotal tokens used: 51\n```\n:::\n:::\n\n\n",
    "supporting": [
      "openai_api_files"
    ],
    "filters": [],
    "includes": {}
  }
}